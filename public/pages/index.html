<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="description" content="v1.09">
  <title>Path Pal - Home</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/png" href="/media/AppIcon.png">
  <link rel="apple-touch-icon" href="/media/AppIcon.png">
  <link rel="stylesheet" href="/css/style.css">
  <meta name="theme-color" content="#0d8c79">
</head>
<body>
  <!-- Desktop Message -->
  <div class="desktop-message">
    <div class="desktop-message-content">
      <div class="desktop-message-icon">
        <img src="/media/icons/Mobile256x256.png" alt="Mobile">
      </div>
      <div class="desktop-message-logo">
        <img src="/media/logo/logo64x64.png" alt="Path Pal Logo">
        <h1>Path Pal</h1>
      </div>
      <h2>Mobile Device Required</h2>
    <p>Path Pal is designed for mobile devices. Please open this site on your mobile phone or tablet to get started.</p>
      <div class="desktop-message-actions">
        <p class="desktop-instructions">To access Path Pal:</p>
        <ol class="desktop-steps">
          <li>Open this URL on your mobile device</li>
          <li>Or scan the QR code below</li>
        </ol>
        <div class="desktop-qr">
          <img src="/media/pc-view/QR.png" alt="Scan to open Path Pal on your phone">
        </div>
      </div>
    </div>
    <div class="desktop-footer-bar">
      <span class="desktop-footer-left">© Path Pal 2025</span>
      <span class="desktop-footer-right">v1.09</span>
    </div>
  </div>

  <!-- Browser Mode Popup (shown when opened in browser, not PWA) -->
  <div class="browser-popup" id="browser-popup">
    <div class="browser-popup-content">
      <h2>Add Path Pal to Home Screen</h2>
      <p id="homescreen-instructions">Path Pal works best as a mobile app, add it to your home screen in 3 simple steps:</p>
      
      <!-- Guide Image -->
      <div class="browser-popup-image">
        <img id="homescreen-guide-image" src="/media/Guide.png" alt="Add to Home Screen Guide">
      </div>
      
      <div class="browser-popup-actions">
        <p style="margin: 0 0 0.5rem 0; color: var(--primary-green); font-size: 1.1rem; text-align: center; font-style: italic;">Or</p>
        <button class="btn-primary" onclick="dismissBrowserBanner()">Continue in Browser</button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="header-content container">
      <div class="logo">
        <a href="/index.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
        <img src="/media/logo/logo64x64.png" alt="Path Pal Logo">
        <h1>Path Pal</h1>
        </a>
      </div>
      <button class="menu-toggle" aria-label="Toggle menu"><img src="/media/icons/Hamburger128x128.png" alt="Menu" style="width: 24px; height: 24px;"></button>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <ul>
      <li><a href="/index.html" class="active"><img src="/media/icons/Home256x256.png" alt="Home" class="nav-icon"> Home</a></li>
      <li><a href="/profile.html"><img src="/media/icons/Profile256x256.png" alt="Profile" class="nav-icon"> My Profile</a></li>
      <li><a href="/odds.html"><img src="/media/icons/Odds256x256.png" alt="Admissions Odds" class="nav-icon"> Admissions Odds</a></li>
      <li><a href="/simulator.html"><img src="/media/icons/WhatIf256x256.png" alt="What If" class="nav-icon"> "What If" Simulator</a></li>
      <li><a href="/explorer.html"><img src="/media/icons/Search256x256.png" alt="College Explorer" class="nav-icon"> College Explorer</a></li>
      <li><a href="/career.html"><img src="/media/icons/DollarSign256x256.png" alt="Career & Salary Paths" class="nav-icon"> Career & Salary Paths</a></li>
      <li><a href="/activities.html"><img src="/media/icons/Activity256x256.png" alt="Activities" class="nav-icon"> Activity & Internship Recs</a></li>
      <li><a href="/planner.html"><img src="/media/icons/Calender256x256.png" alt="4-Year Planner" class="nav-icon"> 4-Year Planner</a></li>
      <li><a href="/messages.html"><img src="/media/icons/Chat256x256.png" alt="AI Counselor" class="nav-icon"> AI Counselor</a></li>
      <li><a href="/saved.html"><img src="/media/icons/Star256x256.png" alt="Saved Colleges" class="nav-icon"> Saved Colleges</a></li>
      <li><a href="#" onclick="handleSignOut(); return false;"><img src="/media/icons/SignOut256x256.png" alt="Sign Out" class="nav-icon"> Sign Out</a></li>
      <li><a href="https://forms.gle/ULMYUSDifpanJ9KMA" target="_blank"><img src="/media/icons/Feedback256x256.png" alt="Feedback" class="nav-icon"> Feedback</a></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main>
    <div class="container">
      <!-- Welcome Banner -->
      <section class="welcome-banner">
        <h2>Welcome to Path Pal!</h2>
        <button class="btn-hero" onclick="window.location.href='/profile.html'">Start Your Journey</button>
      </section>

      <!-- Progress Snapshot -->
      <section class="progress-snapshot">
        <h3>Your Progress</h3>
        <div class="progress-item">
          <span>Profile Completion</span>
          <span id="profile-completion">0%</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="profile-progress" style="width: 0%"></div>
        </div>
        <!-- Divider above Upcoming Deadlines -->
        <div style="border-bottom: 1px solid var(--border-color); margin: 0.75rem 0 0.25rem 0;"></div>
        <div class="progress-item">
          <span>Upcoming Deadlines</span>
          <span id="deadline-count">0</span>
        </div>
        <div class="progress-item">
          <span>Saved Colleges</span>
          <span id="saved-count">0</span>
        </div>
      </section>

      <!-- Blog Post Section -->
      <section class="blog-post-section" onclick="showBlogPost()" style="margin: 1.5rem 0; padding: 0; border: 2px solid var(--primary-green); border-radius: 12px; background: var(--white); cursor: pointer; transition: background 0.2s; overflow: hidden;" onmouseover="this.style.background='var(--light-mint)'" onmouseout="this.style.background='var(--white)'">
        <img src="/media/blogs/BlogPost%231.png" alt="Blog Post Image" style="width: 100%; height: auto; display: block;">
        <div style="padding: 1rem; text-align: center;">
          <h3 style="color: var(--primary-green); margin: 0 0 0.5rem 0;">Why we Made Path Pal</h3>
          <p style="color: var(--text-dark); margin: 0; font-size: 0.9rem;">Blog Post • 11/23/2025</p>
        </div>
      </section>

      <!-- Blog Post Modal -->
      <div id="blog-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 10000; overflow-y: auto; padding: 1rem;">
        <div style="max-width: 600px; margin: 2rem auto; background: var(--white); border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h2 style="color: var(--primary-green); margin: 0;">Why we Made Path Pal</h2>
            <button onclick="closeBlogPost()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-light); padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center;">×</button>
          </div>
          <div id="blog-content" style="color: var(--text-dark); line-height: 1.6;">
            <p style="margin-bottom: 1.5rem;">It started with a simple observation: while some students had access to private college counselors, expensive test prep, and personalized guidance, many public school students were navigating the college application process completely alone.</p>
            
            <p style="margin-bottom: 1.5rem;">We saw students who had the potential to get into great schools but didn't know where to start. They didn't know which colleges matched their profile, how to improve their chances, or what activities would strengthen their applications. Their schools were understaffed, with one counselor responsible for hundreds of students. Private counseling cost thousands of dollars that their families couldn't afford.</p>
            
            <p style="margin-bottom: 1.5rem;">That's when we realized something had to change. Every student deserves access to quality college guidance, regardless of their school's resources or their family's income. So we built Path Pal.</p>
            
            <p style="margin-bottom: 1.5rem;">Path Pal was created to level the playing field. We wanted to give every student, especially those in public schools without dedicated college counselors, the same tools and guidance that were previously only available to those who could pay for it.</p>
            
            <p style="margin-bottom: 1.5rem;">Our AI counselor is available 24/7, answering questions about college admissions, course selection, and test preparation. Our admissions odds calculator shows students where they stand and how to improve. Our "What If" simulator lets them test different scenarios before making changes. All of this is free and accessible to anyone.</p>
            
            <p style="margin-bottom: 1.5rem;">We built Path Pal because we believe that access to quality college guidance shouldn't depend on your zip code or your family's income. Every student deserves a fair shot at reaching their dream schools, and we're here to make sure they get it.</p>
            
            <p style="margin-bottom: 0;">This is more than just an app to us. It's our mission to ensure that every student, regardless of their circumstances, has the tools and support they need to succeed. That's why we made Path Pal.</p>
          </div>
        </div>
      </div>

      <!-- Quick Access Tiles -->
      <section class="quick-access">
        <a href="/explorer.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Search256x256.png" alt="Search"></div>
          <h3>Explore Colleges</h3>
          <p>Find your perfect fit</p>
        </a>
        <a href="/messages.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Chat256x256.png" alt="Chat"></div>
          <h3>AI Chat Advisor</h3>
          <p>Get instant guidance</p>
        </a>
        <a href="/saved.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Star256x256.png" alt="Star"></div>
          <h3>Saved Colleges</h3>
          <p>Track favorite Colleges</p>
        </a>
        <a href="/odds.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Odds256x256.png" alt="Odds"></div>
          <h3>Check Your Odds</h3>
          <p>See admission chances</p>
        </a>
        <a href="/career.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/DollarSign256x256.png" alt="Career"></div>
          <h3>Career & Salary</h3>
          <p>Explore career paths</p>
        </a>
        <a href="/activities.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Activity256x256.png" alt="Activity"></div>
          <h3>Activity Recs</h3>
          <p>Get suggestions</p>
        </a>
        <a href="/planner.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/Calender256x256.png" alt="Calendar"></div>
          <h3>Plan Your Path</h3>
          <p>4-year roadmap</p>
        </a>
        <a href="/simulator.html" class="tile">
          <div class="tile-icon"><img src="/media/icons/WhatIf256x256.png" alt="What If"></div>
          <h3>"What If"</h3>
          <p>Test scenarios</p>
        </a>
      </section>

      <!-- Privacy Policy Link -->
      <div style="text-align: center; margin: 1.5rem 0 0.5rem 0;">
        <a href="https://maximilianising.github.io/PathPal/PRIVACY_POLICY.html" target="_blank" style="color: var(--primary-green); font-size: 0.85rem; font-style: italic; text-decoration: none;">Privacy Policy</a>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; Path Pal 2025 — v1.09</p>
    </div>
  </footer>


  <script src="/js/api.js"></script>
  <script src="/js/app.js"></script>
  <script>
    // Show browser popup if not in standalone mode and on mobile
    function checkBrowserMode() {
      if (isMobileDevice() && !isStandaloneMode()) {
        // Check if user dismissed it
        const dismissed = localStorage.getItem('browser-popup-dismissed');
        if (!dismissed) {
          const popup = document.getElementById('browser-popup');
          
          if (popup) {
            popup.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevent scrolling
            
            // Update instructions and image based on platform
            const instructions = document.getElementById('homescreen-instructions');
            const guideImage = document.getElementById('homescreen-guide-image');
            
            if (instructions && guideImage) {
              const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
              const isAndroid = /Android/.test(navigator.userAgent);
              
              if (isIOS) {
                instructions.innerHTML = 'Path Pal works best as a mobile app, add it to your home screen in 3 simple steps:<br><br>1. Tap the "Share" button (square with arrow pointing up) on your screen<br>2. Tap the "More" button<br>3. Tap the "Add to Home Screen" button on the bottom<br><br>You\'ll now have quick access to Path Pal from your home screen!';
                guideImage.src = '/media/Guide.png';
                guideImage.alt = 'iOS Add to Home Screen Guide';
              } else if (isAndroid) {
                instructions.innerHTML = 'Path Pal works best as a mobile app, add it to your home screen in 3 simple steps:<br><br>1. Tap the menu button (three dots) in the top right of your browser<br>2. Select "Add to Home screen" or "Install app" from the menu<br>3. Tap "Add" or "Install" to confirm<br><br>You\'ll now have quick access to Path Pal from your home screen!';
                guideImage.src = '/media/Guide.png';
                guideImage.alt = 'Android Add to Home Screen Guide';
              } else {
                instructions.innerHTML = 'Path Pal works best as a mobile app, add it to your home screen in 3 simple steps:<br><br>1. Look for the install button or menu icon in your browser\'s address bar<br>2. Click "Install" or "Add to Home Screen" from the prompt<br>3. Confirm the installation when prompted<br><br>You\'ll now have quick access to Path Pal from your home screen!';
                guideImage.src = '/media/Guide.png';
                guideImage.alt = 'Add to Home Screen Guide';
              }
            }
          }
        }
      }
    }

    // Dismiss browser popup
    function dismissBrowserBanner() {
      const popup = document.getElementById('browser-popup');
      
      if (popup) {
        popup.style.display = 'none';
        document.body.style.overflow = ''; // Restore scrolling
      }
      
      localStorage.setItem('browser-popup-dismissed', 'true');
    }

    // Show blog post modal
    function showBlogPost() {
      const modal = document.getElementById('blog-modal');
      if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
      }
    }

    // Close blog post modal
    function closeBlogPost() {
      const modal = document.getElementById('blog-modal');
      if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = '';
      }
    }

    // Close modal when clicking outside
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('blog-modal');
      if (modal && e.target === modal) {
        closeBlogPost();
      }
    });

    // Load progress data and check browser mode
    document.addEventListener('DOMContentLoaded', async () => {
      // Initialize user ID first
      await initializeUserId();
      
      try {
        const profile = await UserProfile.get();
        const savedColleges = SavedColleges.get();
        
        // Get test type from localStorage if not in profile
        const testType = profile.testType || localStorage.getItem('test-type') || '';
        
          // Calculate profile completion (0–100)
          // Note: AP courses and activities are not counted - they count as complete even if 0 is selected
        let completion = 0;
        if (profile.name) completion += 15;
          if (profile.grade) completion += 15;
        if (profile.gpa) completion += 15;
          // SAT/ACT counts if scores exist OR if "Untaken" is selected (testType === 'UNTAKEN')
          if (profile.sat || profile.act || testType === 'UNTAKEN') completion += 15;
          if (profile.majors && profile.majors.length > 0) completion += 20;
          // AP courses and activities always count as complete (even if 0), so not included in calculation
          if (profile.careerGoals) completion += 20;

          if (completion > 100) completion = 100;
        
        const completionEl = document.getElementById('profile-completion');
        const progressEl = document.getElementById('profile-progress');
        const progressBarEl = document.querySelector('.progress-snapshot .progress-bar');
        if (completionEl) {
          completionEl.textContent = completion + '%';
        }
        if (progressEl) {
          // Force width update so the green fill actually reflects completion
          progressEl.style.setProperty('width', completion + '%', 'important');
          // Ensure the fill color is the primary green, even if CSS variables fail
          progressEl.style.backgroundColor = getComputedStyle(document.documentElement)
            .getPropertyValue('--primary-green') || '#0d8c79';
        }

        if (progressBarEl) {
          // As a backup, also tint the outer bar using a gradient so progress is always visible
          const green = getComputedStyle(document.documentElement)
            .getPropertyValue('--primary-green') || '#0d8c79';
          const gray = getComputedStyle(document.documentElement)
            .getPropertyValue('--border-color') || '#d0d7de';
          progressBarEl.style.background = `linear-gradient(to right, ${green} 0%, ${green} ${completion}%, ${gray} ${completion}%, ${gray} 100%)`;
        }
        document.getElementById('saved-count').textContent = savedColleges.length;
      } catch (error) {
        console.error('Error loading profile:', error);
      }
      
      // Check if should show browser banner (wait a bit for isStandaloneMode to be available)
      setTimeout(checkBrowserMode, 100);
    });
  </script>
  <script src="/js/auth.js"></script>
  <script>
    function handleSignOut() {
      signOut();
      window.location.href = '/pages/login.html';
    }
  </script>
</body>
</html>

