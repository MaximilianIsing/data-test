<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="4-Year Planner - Path Pal">
  <title>4-Year Planner - Path Pal</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/style.css">
  <meta name="theme-color" content="#0d8c79">
</head>
<body>
  <div class="desktop-message">
    <h1><img src="/media/icons/Mobile256x256.png" alt="Mobile" style="width: 48px; height: 48px; vertical-align: middle; margin-right: 0.5rem;"> Mobile App Required</h1>
    <p>Path Pal is designed for mobile devices. Please open this site on your mobile phone or tablet.</p>
  </div>

  <header>
    <div class="header-content container">
      <div class="logo">
        <a href="/index.html" style="display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: inherit;">
          <img src="/media/logo/logo64x64.png" alt="Path Pal Logo">
          <h1>Path Pal</h1>
        </a>
      </div>
      <button class="menu-toggle" aria-label="Toggle menu"><img src="/media/icons/Hamburger128x128.png" alt="Menu" style="width: 24px; height: 24px;"></button>
    </div>
  </header>

  <nav>
    <ul>
      <li><a href="/index.html"><img src="/media/icons/Home256x256.png" alt="Home" class="nav-icon"> Home</a></li>
      <li><a href="/profile.html"><img src="/media/icons/Profile256x256.png" alt="Profile" class="nav-icon"> My Profile</a></li>
      <li><a href="/odds.html"><img src="/media/icons/Odds256x256.png" alt="Admissions Odds" class="nav-icon"> Admissions Odds</a></li>
      <li><a href="/simulator.html"><img src="/media/icons/WhatIf256x256.png" alt="What If" class="nav-icon"> "What If" Simulator</a></li>
      <li><a href="/explorer.html"><img src="/media/icons/Search256x256.png" alt="College Explorer" class="nav-icon"> College Explorer</a></li>
      <li><a href="/career.html"><img src="/media/icons/DollarSign256x256.png" alt="Career & Salary Paths" class="nav-icon"> Career & Salary Paths</a></li>
      <li><a href="/activities.html"><img src="/media/icons/Activity256x256.png" alt="Activities" class="nav-icon"> Activity & Internship Recs</a></li>
      <li><a href="/planner.html" class="active"><img src="/media/icons/Calender256x256.png" alt="4-Year Planner" class="nav-icon"> 4-Year Planner</a></li>
      <li><a href="/messages.html"><img src="/media/icons/Chat256x256.png" alt="AI Counselor" class="nav-icon"> AI Counselor</a></li>
      <li><a href="/saved.html"><img src="/media/icons/Star256x256.png" alt="Saved Colleges" class="nav-icon"> Saved Colleges</a></li>
      <li><a href="#" onclick="handleSignOut(); return false;"><img src="/media/icons/SignOut256x256.png" alt="Sign Out" class="nav-icon"> Sign Out</a></li>
      <li><a href="https://forms.gle/ULMYUSDifpanJ9KMA" target="_blank"><img src="/media/icons/Feedback256x256.png" alt="Feedback" class="nav-icon"> Feedback</a></li>
    </ul>
  </nav>

  <main>
    <div class="container">
      <h2 style="color: var(--primary-green); margin: 1rem 0;">4-Year Planner</h2>

      <div class="card">
        <p>Your step-by-step roadmap with recommended courses, milestones, and activities. The planner automatically adjusts if your career goals change.</p>
        <button class="btn btn-secondary" onclick="generatePlanner()" style="width: 100%; margin-top: 1rem;">
          Generate/Update Planner
        </button>
      </div>

      <!-- Year Selector -->
      <div class="card">
        <h3>Select Year</h3>
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem;">
          <button class="btn year-btn active" onclick="showYear(1)">Year 1</button>
          <button class="btn year-btn" onclick="showYear(2)">Year 2</button>
          <button class="btn year-btn" onclick="showYear(3)">Year 3</button>
          <button class="btn year-btn" onclick="showYear(4)">Year 4</button>
        </div>
      </div>

      <!-- Planner Content -->
      <div id="planner-content">
        <div class="card">
          <h3 id="year-title">Year 1 Roadmap</h3>
          <div id="year-content" class="loading">Loading planner...</div>
        </div>
      </div>

      <!-- Milestones -->
      <div class="card" id="milestones-card" style="display: none;">
        <h3>Key Milestones</h3>
        <div id="milestones-content"></div>
      </div>

      <!-- Timeline -->
      <div class="card" id="timeline-card" style="display: none;">
        <h3>Timeline</h3>
        <div id="timeline-content"></div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2025 Path Pal. v1.09.2</p>
    </div>
  </footer>

  <script src="/js/api.js"></script>
  <script src="/js/app.js"></script>
  <script>
    let currentYear = 1;
    let plannerData = {};

    // Calculate profile completion (same logic as index.html)
    async function calculateProfileCompletion() {
      const profile = await UserProfile.get();
      const testType = profile.testType || localStorage.getItem('test-type') || '';
      
      let completion = 0;
      if (profile.name) completion += 15;
      if (profile.grade) completion += 15;
      if (profile.gpa) completion += 15;
      // SAT/ACT counts if scores exist OR if "Untaken" is selected (testType === 'UNTAKEN')
      if (profile.sat || profile.act || testType === 'UNTAKEN') completion += 15;
      if (profile.majors && profile.majors.length > 0) completion += 20;
      // AP courses and activities always count as complete (even if 0), so not included in calculation
      if (profile.careerGoals) completion += 20;
      
      if (completion > 100) completion = 100;
      return completion;
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const completion = await calculateProfileCompletion();
      if (completion < 100) {
        const content = document.getElementById('year-content');
        content.innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <h4 style="color: var(--primary-green); margin-bottom: 1rem;">Profile Incomplete</h4>
            <p style="color: var(--text-light); margin-bottom: 1rem;">
              Your profile must be 100% complete to generate a personalized 4-year plan.
            </p>
            <p style="color: var(--text-light); margin-bottom: 1.5rem;">
              Current completion: <strong style="color: var(--primary-green);">${completion}%</strong>
            </p>
            <button class="btn btn-primary" onclick="window.location.href='/profile.html'">
              Complete Your Profile
            </button>
          </div>
        `;
        document.getElementById('milestones-card').style.display = 'none';
        document.getElementById('timeline-card').style.display = 'none';
      } else {
        loadPlanner();
      }
    });

    async function showYear(year) {
      // Check if profile is complete
      const completion = await calculateProfileCompletion();
      if (completion < 100) {
        showNotification('Your profile must be 100% complete to view the 4-year plan. Please complete your profile first.', 'error');
        return;
      }
      
      currentYear = year;
      
      // Update active button
      document.querySelectorAll('.year-btn').forEach((btn, idx) => {
        btn.classList.remove('active');
        if (idx === year - 1) {
          btn.classList.add('active');
        }
      });
      
      await displayYear(year);
    }

    async function displayYear(year) {
      const content = document.getElementById('year-content');
      const title = document.getElementById('year-title');
      title.textContent = `Year ${year} Roadmap`;

      const yearData = plannerData[`year${year}`] || await generateDefaultYear(year);

      content.innerHTML = `
        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-green); margin-bottom: 1rem;">Recommended Courses</h4>
          <ul style="list-style: none; padding: 0;">
            ${yearData.courses.map(course => `
              <li style="padding: 0.75rem; background: var(--light-mint); border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid var(--primary-green);">
                <strong>${course.name}</strong> - ${course.description || 'Required course for your major'}
              </li>
            `).join('')}
          </ul>
        </div>

        <div style="margin-bottom: 1.5rem;">
          <h4 style="color: var(--primary-green); margin-bottom: 1rem;">Recommended Activities</h4>
          <ul style="list-style: none; padding: 0;">
            ${yearData.activities.map(activity => `
              <li style="padding: 0.75rem; background: var(--light-mint); border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid var(--primary-green);">
                <strong>${activity.name}</strong> - ${activity.description || 'Activity to strengthen your profile'}
              </li>
            `).join('')}
          </ul>
        </div>

        <div>
          <h4 style="color: var(--primary-green); margin-bottom: 1rem;">Important Dates</h4>
          <ul style="list-style: none; padding: 0;">
            ${yearData.dates.map(date => `
              <li style="padding: 0.75rem; background: var(--light-mint); border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid var(--primary-green);">
                <strong>${date.name}</strong> - ${date.date}
              </li>
            `).join('')}
          </ul>
        </div>
      `;
    }

    async function generateDefaultYear(year) {
      const profile = await UserProfile.get();
      const majors = profile.majors || ['General Studies'];
      const major = majors[0];
      const grade = profile.grade || '';
      const isHighSchool = grade.includes('9th') || grade.includes('10th') || grade.includes('11th') || grade.includes('12th');

      const yearData = {
        courses: [],
        activities: [],
        dates: []
      };

      if (isHighSchool) {
        // High school planner
        if (year === 1) {
          yearData.courses = [
            { name: 'English 9', description: 'Develop reading and writing skills' },
            { name: 'Algebra I or Geometry', description: 'Build mathematical foundation' },
            { name: 'Biology', description: 'Introduction to life sciences' },
            { name: 'World History', description: 'Social studies requirement' },
            { name: 'Foreign Language I', description: 'Begin language study' },
            { name: 'Elective', description: 'Explore interests (Art, Music, PE, etc.)' }
          ];
          yearData.activities = [
            { name: 'Join 2-3 clubs', description: 'Explore interests and build involvement' },
            { name: 'Start community service', description: 'Begin building service hours' },
            { name: 'Maintain strong GPA', description: 'Focus on academic excellence' }
          ];
          yearData.dates = [
            { name: 'School Year Begins', date: 'August/September' },
            { name: 'First Quarter Grades', date: 'October' },
            { name: 'Midterm Exams', date: 'January' },
            { name: 'Final Exams', date: 'May/June' }
          ];
        } else if (year === 2) {
          yearData.courses = [
            { name: 'English 10', description: 'Advanced composition and literature' },
            { name: 'Geometry or Algebra II', description: 'Continue math progression' },
            { name: 'Chemistry', description: 'Physical sciences' },
            { name: 'US History', description: 'American history requirement' },
            { name: 'Foreign Language II', description: 'Continue language study' },
            { name: 'Elective', description: 'Continue exploring interests' }
          ];
          yearData.activities = [
            { name: 'Take on leadership role', description: 'Become officer or leader in club' },
            { name: 'Summer program/volunteer', description: 'Plan meaningful summer activity' },
            { name: 'Explore career interests', description: 'Research potential majors/careers' }
          ];
          yearData.dates = [
            { name: 'PSAT (Optional)', date: 'October' },
            { name: 'AP Exam Registration', date: 'March' },
            { name: 'Summer Planning', date: 'May' }
          ];
        } else if (year === 3) {
          yearData.courses = [
            { name: 'English 11 / AP English', description: 'Advanced English or AP course' },
            { name: 'Algebra II or Pre-Calculus', description: 'Advanced mathematics' },
            { name: 'Physics or AP Science', description: 'Advanced science course' },
            { name: 'AP ' + major + ' (if available)', description: 'Advanced course in your interest area' },
            { name: 'Foreign Language III (if continuing)', description: 'Advanced language' },
            { name: 'Elective', description: 'Continue specialization' }
          ];
          yearData.activities = [
            { name: 'Take SAT/ACT', description: 'Register and prepare for standardized tests' },
            { name: 'College visits', description: 'Visit campuses of interest' },
            { name: 'Summer internship/research', description: 'Gain experience in field of interest' },
            { name: 'Build strong activity profile', description: 'Deepen involvement in key activities' }
          ];
          yearData.dates = [
            { name: 'SAT/ACT Registration', date: 'Fall' },
            { name: 'SAT/ACT Test Date', date: 'Spring' },
            { name: 'College Research Begins', date: 'Spring' },
            { name: 'AP Exams', date: 'May' },
            { name: 'Summer Program Applications', date: 'January-March' }
          ];
        } else if (year === 4) {
          yearData.courses = [
            { name: 'English 12 / AP English', description: 'Senior English or AP Literature' },
            { name: 'Calculus or Statistics', description: 'Advanced math' },
            { name: 'AP ' + major + ' (if available)', description: 'Advanced coursework' },
            { name: 'Electives', description: 'Complete remaining requirements' }
          ];
          yearData.activities = [
            { name: 'College applications', description: 'Complete all application materials' },
            { name: 'Scholarship applications', description: 'Apply for financial aid' },
            { name: 'Maintain activities', description: 'Continue leadership and involvement' }
          ];
          yearData.dates = [
            { name: 'Early Decision/Early Action Deadline', date: 'November 1' },
            { name: 'Regular Decision Deadlines', date: 'January 1-15' },
            { name: 'FAFSA Submission', date: 'October 1' },
            { name: 'Decision Notifications', date: 'March-April' },
            { name: 'Commitment Deadline', date: 'May 1' },
            { name: 'Graduation', date: 'May/June' }
          ];
        }
      } else {
        // College planner
        if (year === 1) {
          yearData.courses = [
            { name: 'Introduction to ' + major, description: 'Foundational course in your major' },
            { name: 'English Composition', description: 'Develop writing and communication skills' },
            { name: 'Calculus I or Statistics', description: 'Build quantitative skills' },
            { name: 'General Education Course', description: 'Complete GE requirements' },
            { name: 'General Education Course', description: 'Explore diverse subjects' },
            { name: 'Elective', description: 'Explore interests outside major' }
          ];
          yearData.activities = [
            { name: 'Join major-related clubs', description: 'Connect with peers in your field' },
            { name: 'Attend career fairs', description: 'Explore career options early' },
            { name: 'Build study habits', description: 'Establish strong academic foundation' },
            { name: 'Find study group', description: 'Build academic support network' }
          ];
          yearData.dates = [
            { name: 'Fall Semester Begins', date: 'August/September' },
            { name: 'Add/Drop Deadline', date: 'First 2 weeks' },
            { name: 'Midterm Exams', date: 'October' },
            { name: 'Final Exams', date: 'December' },
            { name: 'Spring Registration', date: 'November' }
          ];
        } else if (year === 2) {
          yearData.courses = [
            { name: 'Intermediate ' + major, description: 'Advanced topics in your major' },
            { name: 'Research Methods', description: 'Learn research and analysis skills' },
            { name: 'Statistics or Data Analysis', description: 'Quantitative analysis skills' },
            { name: 'General Education', description: 'Continue GE requirements' },
            { name: 'Major Elective', description: 'Begin specialization' },
            { name: 'General Education', description: 'Complete remaining GE' }
          ];
          yearData.activities = [
            { name: 'Apply for summer internships', description: 'Gain professional experience' },
            { name: 'Take on leadership role', description: 'Become officer in club or organization' },
            { name: 'Attend networking events', description: 'Build professional connections' },
            { name: 'Research opportunities', description: 'Explore research with professors' }
          ];
          yearData.dates = [
            { name: 'Internship Applications Open', date: 'January-March' },
            { name: 'Summer Program Deadlines', date: 'February-April' },
            { name: 'Midterm Exams', date: 'March' },
            { name: 'Final Exams', date: 'May' }
          ];
        } else if (year === 3) {
          yearData.courses = [
            { name: 'Advanced ' + major, description: 'Specialized upper-division coursework' },
            { name: 'Capstone Preparation', description: 'Begin planning major project' },
            { name: 'Major Electives', description: 'Deepen specialization' },
            { name: 'Minor/Concentration Courses', description: 'Complete additional focus area' }
          ];
          yearData.activities = [
            { name: 'Summer internship/research', description: 'Gain significant professional experience' },
            { name: 'Independent research project', description: 'Work with faculty mentor' },
            { name: 'Present at conferences', description: 'Share research or projects' },
            { name: 'Build professional portfolio', description: 'Document your work and achievements' }
          ];
          yearData.dates = [
            { name: 'Graduate School Research (if applicable)', date: 'Fall' },
            { name: 'GRE/MCAT/LSAT Prep (if needed)', date: 'Summer-Fall' },
            { name: 'Internship Applications', date: 'Fall-Spring' },
            { name: 'Midterm Exams', date: 'March' },
            { name: 'Final Exams', date: 'May' }
          ];
        } else if (year === 4) {
          yearData.courses = [
            { name: 'Senior Seminar/Capstone', description: 'Final capstone course' },
            { name: 'Thesis/Research Project', description: 'Complete major project' },
            { name: 'Advanced Electives', description: 'Final specialization courses' },
            { name: 'Complete remaining requirements', description: 'Finish all degree requirements' }
          ];
          yearData.activities = [
            { name: 'Job/Post-Grad Applications', description: 'Apply for jobs or graduate programs' },
            { name: 'Network building', description: 'Connect with alumni and professionals' },
            { name: 'Attend career fairs', description: 'Meet employers and recruiters' },
            { name: 'Complete portfolio', description: 'Finalize professional materials' }
          ];
          yearData.dates = [
            { name: 'Graduate School Applications', date: 'Fall-Winter' },
            { name: 'Job Application Season', date: 'Fall-Spring' },
            { name: 'Thesis Defense/Project Presentation', date: 'Spring' },
            { name: 'Final Exams', date: 'May' },
            { name: 'Graduation', date: 'May/June' }
          ];
        }
      }

      return yearData;
    }

    async function generatePlanner() {
      // Check if profile is complete
      const completion = await calculateProfileCompletion();
      if (completion < 100) {
        showNotification('Your profile must be 100% complete to generate a personalized 4-year plan. Please complete your profile first.', 'error');
        const content = document.getElementById('year-content');
        content.innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <h4 style="color: var(--primary-green); margin-bottom: 1rem;">Profile Incomplete</h4>
            <p style="color: var(--text-light); margin-bottom: 1rem;">
              Your profile must be 100% complete to generate a personalized 4-year plan.
            </p>
            <p style="color: var(--text-light); margin-bottom: 1.5rem;">
              Current completion: <strong style="color: var(--primary-green);">${completion}%</strong>
            </p>
            <button class="btn btn-primary" onclick="window.location.href='/profile.html'">
              Complete Your Profile
            </button>
          </div>
        `;
        return;
      }

      const content = document.getElementById('year-content');
      content.innerHTML = '<p class="loading">Generating personalized 4-year plan...</p>';

      try {
        const profile = await UserProfile.get();
        const message = `Create a personalized 4-year academic and activity plan for a ${profile.grade || 'high school/college'} student with the following profile: GPA: ${profile.gpa || 'not set'}, Major(s): ${(profile.majors || []).join(', ') || 'not specified'}, Career Goals: ${profile.careerGoals || 'not specified'}. Provide a detailed roadmap for each year with courses, activities, and important dates. Format as structured data.`;

        const response = await sendChatMessage(message);
        
        // Parse AI response and extract planner data
        // For now, use default structure with AI enhancements
        for (let year = 1; year <= 4; year++) {
          plannerData[`year${year}`] = await generateDefaultYear(year);
        }

        // Save planner
        Storage.set('plannerData', plannerData);
        
        showNotification('Planner generated successfully!', 'success');
        await displayYear(currentYear);
        await loadMilestones();
        await loadTimeline();
      } catch (error) {
        // Fallback to default planner
        for (let year = 1; year <= 4; year++) {
          plannerData[`year${year}`] = await generateDefaultYear(year);
        }
        Storage.set('plannerData', plannerData);
        await displayYear(currentYear);
        await loadMilestones();
        await loadTimeline();
        showNotification('Planner updated with default structure.', 'info');
      }
    }

    async function loadPlanner() {
      const saved = Storage.get('plannerData', null);
      if (saved) {
        plannerData = saved;
      } else {
        // Generate default planner
        for (let year = 1; year <= 4; year++) {
          plannerData[`year${year}`] = await generateDefaultYear(year);
        }
        Storage.set('plannerData', plannerData);
      }
      
      displayYear(currentYear);
      await loadMilestones();
      await loadTimeline();
    }

    async function loadMilestones() {
      const container = document.getElementById('milestones-content');
      const card = document.getElementById('milestones-card');
      const profile = await UserProfile.get();
      const grade = profile.grade || '';
      const isHighSchool = grade.includes('9th') || grade.includes('10th') || grade.includes('11th') || grade.includes('12th');
      
      const savedMilestones = Storage.get('milestones', {});
      
      const milestones = isHighSchool ? [
        { year: 1, name: 'Maintain 3.5+ GPA', completed: savedMilestones['1'] || false },
        { year: 2, name: 'Complete Core Courses', completed: savedMilestones['2'] || false },
        { year: 2, name: 'Take PSAT', completed: savedMilestones['2-psat'] || false },
        { year: 3, name: 'Take SAT/ACT', completed: savedMilestones['3-test'] || false },
        { year: 3, name: 'Visit 3+ Colleges', completed: savedMilestones['3-visits'] || false },
        { year: 4, name: 'Submit College Applications', completed: savedMilestones['4-apps'] || false },
        { year: 4, name: 'Complete FAFSA', completed: savedMilestones['4-fafsa'] || false },
        { year: 4, name: 'Choose College', completed: savedMilestones['4-choose'] || false }
      ] : [
        { year: 1, name: 'Maintain Strong GPA (3.0+)', completed: savedMilestones['1'] || false },
        { year: 1, name: 'Join Major-Related Club', completed: savedMilestones['1-club'] || false },
        { year: 2, name: 'Complete Core Requirements', completed: savedMilestones['2'] || false },
        { year: 2, name: 'Secure Summer Internship', completed: savedMilestones['2-intern'] || false },
        { year: 3, name: 'Take Leadership Role', completed: savedMilestones['3-lead'] || false },
        { year: 3, name: 'Complete Research/Project', completed: savedMilestones['3-research'] || false },
        { year: 4, name: 'Complete Capstone/Thesis', completed: savedMilestones['4-capstone'] || false },
        { year: 4, name: 'Secure Post-Grad Plan', completed: savedMilestones['4-postgrad'] || false }
      ];

      container.innerHTML = milestones.map(m => {
        const milestoneId = typeof m.year === 'string' ? m.year : `${m.year}-${m.name.toLowerCase().replace(/\s+/g, '-').substring(0, 20)}`;
        return `
        <div style="padding: 1rem; background: var(--light-mint); border-radius: 8px; margin-bottom: 0.5rem; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid var(--primary-green);">
          <div>
            <strong style="color: var(--primary-green);">Year ${m.year}:</strong> ${m.name}
          </div>
          <input type="checkbox" ${m.completed ? 'checked' : ''} onchange="updateMilestone('${milestoneId}', this.checked)">
        </div>
      `;
      }).join('');

      card.style.display = 'block';
    }

    async function loadTimeline() {
      const container = document.getElementById('timeline-content');
      const card = document.getElementById('timeline-card');
      const profile = await UserProfile.get();
      const grade = profile.grade || '';
      const isHighSchool = grade.includes('9th') || grade.includes('10th') || grade.includes('11th') || grade.includes('12th');
      
      const timeline = isHighSchool ? [
        { date: 'Fall Year 1 (9th Grade)', event: 'Start strong academically, join clubs, begin building GPA foundation' },
        { date: 'Spring Year 1', event: 'Maintain grades, explore interests, start community service' },
        { date: 'Summer Year 1', event: 'Volunteer, summer program, or job shadowing' },
        { date: 'Fall Year 2 (10th Grade)', event: 'Take on leadership roles, continue strong academics' },
        { date: 'Spring Year 2', event: 'Take PSAT (optional), plan meaningful summer' },
        { date: 'Summer Year 2', event: 'Summer program, internship, or research opportunity' },
        { date: 'Fall Year 3 (11th Grade)', event: 'Take SAT/ACT, begin college research, visit campuses' },
        { date: 'Spring Year 3', event: 'Take AP exams, continue college visits, plan senior year' },
        { date: 'Summer Year 3', event: 'Final test prep if needed, complete college list, start essays' },
        { date: 'Fall Year 4 (12th Grade)', event: 'Submit early applications, complete FAFSA, request recommendations' },
        { date: 'Spring Year 4', event: 'Receive decisions, compare offers, commit to college, celebrate!' }
      ] : [
        { date: 'Fall Year 1', event: 'Start strong academically, join clubs, build study habits' },
        { date: 'Spring Year 1', event: 'Explore major, attend career fairs, maintain GPA' },
        { date: 'Summer Year 1', event: 'Volunteer, work, or take summer courses' },
        { date: 'Fall Year 2', event: 'Begin specialization, apply for summer internships' },
        { date: 'Spring Year 2', event: 'Take on leadership, secure summer opportunity' },
        { date: 'Summer Year 2', event: 'Complete internship or research experience' },
        { date: 'Fall Year 3', event: 'Advanced coursework, research projects, graduate school prep (if applicable)' },
        { date: 'Spring Year 3', event: 'Capstone preparation, present research, network professionally' },
        { date: 'Summer Year 3', event: 'Final internship, graduate school applications (if applicable)' },
        { date: 'Fall Year 4', event: 'Complete capstone/thesis, apply for jobs or grad programs' },
        { date: 'Spring Year 4', event: 'Finalize post-grad plans, complete degree, graduate!' }
      ];

      container.innerHTML = timeline.map((item, idx) => `
        <div style="padding: 1rem; background: var(--light-mint); border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid var(--primary-green); position: relative; padding-left: 2rem;">
          <div style="position: absolute; left: -8px; top: 1rem; width: 16px; height: 16px; background: var(--primary-green); border-radius: 50%;"></div>
          <div><strong style="color: var(--primary-green);">${item.date}</strong></div>
          <div style="color: var(--text-light); font-size: 0.9rem; margin-top: 0.25rem;">${item.event}</div>
        </div>
      `).join('');

      card.style.display = 'block';
    }

    function updateMilestone(milestoneId, completed) {
      // Save milestone status
      const milestones = Storage.get('milestones', {});
      milestones[milestoneId] = completed;
      Storage.set('milestones', milestones);
    }
  </script>
  <script src="/js/auth.js"></script>
  <script>
    function handleSignOut() {
      signOut();
      window.location.href = '/pages/login.html';
    }
  </script>
</body>
</html>

